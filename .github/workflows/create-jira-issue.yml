name: Auto Create Branch on Issue

on:
  issues:
    types: [opened]

jobs:
  create-branch:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # ë¸Œëœì¹˜ í‘¸ì‹œ ê¶Œí•œ ë¶€ì—¬
    steps:
      - name: ë¸Œëœì¹˜ëª… íŒŒì‹±
        id: parse-branch
        run: |
          # ì´ìŠˆ ë³¸ë¬¸ì—ì„œ ë¸Œëœì¹˜ëª… ì¶”ì¶œ (Markdown í—¤ë” ê¸°ë°˜)
          BRANCH_NAME=$(echo "${{ github.event.issue.body }}" | grep -A 1 'ğŸŒ³ ë¸Œëœì¹˜ëª…' | tail -n1 | xargs)
          echo "branch_name=$BRANCH_NAME" >> $GITHUB_OUTPUT

      - name: ë ˆí¬ì§€í† ë¦¬ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v3
        with:
          ref: main  # ê¸°ë³¸ ë¸Œëœì¹˜ ì„¤ì • (í•„ìš” ì‹œ ìˆ˜ì •)

      - name: ì‹ ê·œ ë¸Œëœì¹˜ ìƒì„± ë° í‘¸ì‹œ
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git checkout -b ${{ steps.parse-branch.outputs.branch_name }}
          git push origin ${{ steps.parse-branch.outputs.branch_name }}
